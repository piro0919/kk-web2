---
slug: "/blog/20220413"
date: "2022-04-13"
title: "sass-mqの使い方"
---

あいも変わらず CSS Modules × Sass の組み合わせが王道だと思っている自分ですが。

Media Queries 周りももっぱら `sass-mq` を使って書いています。

で、近々 Sass の `@import` rule が廃止されるとのことで。

`sass-mq` も v6 へのメジャーアップデートも入ったので、それならと今一度実装方法を確認してみました。

---

## 環境

- Next.js（CSS Modules 使用）
- sass：v1.49.11
- sass-mq：v6.0.0

とはいえ Next.js はそこまで関係ないです。

## 実装

まずは sass-mq にプロジェクトの breakpoints を流し込んでいきます。

今回は格納場所を `/src/styles/mq-settings.scss` としています。

```scss
$breakpoints: (
  mobile: 375px,
  tablet: 740px,
  desktop: 980px,
  wide: 1300px,
);

@use "sass-mq" with
  (
    $breakpoints: $breakpoints,
    $show-breakpoints: (
      mobile,
      tablet,
      desktop,
      wide,
    )
  );
```

続いて上記の設定をグローバルで読み込みます。

Next.js の場合は `_app.tsx` ですね。

```tsx
import "../styles/mq-settings.scss";
```

あとは各々のスタイルシートで読み込んでやれば OK です。

今回は例として `/src/components/Hoge/style.module.scss` とします。

```scss
@use "sass-mq" as mq;

.hoge {
  @include mq.mq($until: tablet) {
    color: red;
  }
  @include mq.mq($from: tablet) {
    color: blue;
  }
}
```

『めんどくさいから namespace なんて使いたくねぇ！』って人は以下のように書いても問題ないかと。

```scss
@use "sass-mq" as *;

.hoge {
  @include mq($until: tablet) {
    color: red;
  }
  @include mq($from: tablet) {
    color: blue;
  }
}
```

## 注意点

上記の実装のままだと本番環境でも breakpoints が表示されてしまうので、なんらかの対処が必要です。

Next.js であれば [`_app` なりてきとうなレイアウトコンポーネントなりで対処](https://nextjs.org/blog/styling-next-with-styled-jsx) してあげれば良いかと。

```tsx
import "../styles/mq-settings.scss";

function MyApp({ Component, pageProps }: AppProps): ReactNode {
  return (
    <>
      <Component {...pageProps} />
      <style global={true} jsx={true}>{`
        body::before {
          display: ${process.env.NODE_ENV === "production" ? "none" : "block"};
        }
      `}</style>
    </>
  );
}

export default MyApp;
```

---

以上です、めっちゃ簡単なのでぜひお試しあれ。
